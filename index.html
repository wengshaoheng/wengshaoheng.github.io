<!DOCTYPE html>

<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" type="text/css" href="app.css" /> 
    <link href="https://cdn.bootcss.com/highlight.js/9.13.1/styles/a11y-dark.min.css" rel="stylesheet">
	<title>APP</title>
</head>

<body>
	<div id="app" class="app center">
		<div id="header" class="header">
            <div style="float:left;width: 50%; height: 100%;text-decoration: underline;font-size: 15pt;"><br />一个老翁的工作日志!</div>
            <!--<div><img style="max-width: 60px;max-height: 60px; float:right; margin:3" src="qie.png" /></div>-->
            <div style="clear: both"></div>
		</div>
		<div id="contentPane" style="clear: both; margin: 2;">
			<div id="nav" class="nav">
                <span class="navTitle" @click="expandAllCat($event)">{{navTitle}}</span> <br />
                <div id="blogCatList" v-for="(blogCat, index) in blogList">
                    <div class="catalog">
                        <a href="#" @click="expandCat($event)">+ {{blogCat.catalog}}</a>
                    </div>
                    <ul :id="a+index" style="display:none;">
                        <li>
                            <div v-for="(blog, index2) in blogCat.articleList">
                                <a :href="blog.url" @click="selectBlog($event)">{{index2 + 1}}. {{blog.title}}</a>
                            </div>
                        </li>
                    </ul>
                </div>
			</div>
			<div class="section">
                <span class="currentLink">{{currentLink}}</span>
                <div id="mypage">
                    <div>
                        <router-link to="/foo">Go to Foo</router-link>
                        <router-link to="/bar">Go to Bar</router-link>
                    </div>
                    <router-view></router-view>
                </div>
                
            </div>
            <div style="clear:both;"></div>
        </div>
        <div id="footer" class="footer">Just for my daily!</div>
	</div> 
</body>


<!-- 渲染脚本 开始 -->
<script src="https://cdn.staticfile.org/vue/2.5.6/vue.min.js"></script>
<script src="https://cdn.staticfile.org/vue-router/2.7.0/vue-router.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.13.1/highlight.min.js"></script>
<script src="blogList.js"></script>
<script src="data.js"></script>
<script>
        const a = "BLOGCAT_";
        const Foo = { template: '<div>foo</div>' }
        const Bar = { template: '<div>baxxxxr</div>' }
        const routes = [
            { path: '/foo', component: Foo },
            { path: '/bar', component: Bar }
        ]

        const router = new VueRouter({
            routes : routes 
        })
	    var content = new Vue({
            router: router,
            el: '#contentPane',
            data: {
                "navTitle": "工作笔记列表",
                "blogList": blogList,
                "currentCatalog": "",
                "currentBlog": "",
                "currentLink": ""
            },
            methods: {
                expandAllCat: function(e) {
                    
                },
                expandCat: function (e) {
                    let topEl = e.currentTarget.parentElement.nextElementSibling;
                    let oldstyle = topEl.getAttribute('style');
                    let newStyle = oldstyle != "display:block" ? "display:block" : "display:none";
                    topEl.setAttribute('style', newStyle);
                    let oldtext = e.currentTarget.text.trim();
                    var folded = /^[+]/.test(oldtext);
                    let newtext = folded ? oldtext.replace('+', '-') : oldtext.replace('-', '+');
                    e.currentTarget.text = newtext;
                },
                selectBlog: function (e) {
                    let obj = e.currentTarget.parentElement.parentElement.parentElement.parentElement;
                    this.currentCatalog = obj.firstElementChild.firstElementChild.text.trim().replace(/^[\-] /, '');
                    this.currentBlog = e.currentTarget.text.trim();
                    this.currentLink = "# " + this.currentCatalog + " >> " + this.currentBlog;
                }
            },
            computed: {
            },
            updated: {

            }
        }).mount('#contentPane');
</script>
<!-- 渲染脚本 结束 -->

</html>
